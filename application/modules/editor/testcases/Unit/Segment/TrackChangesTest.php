<?php
/*
START LICENSE AND COPYRIGHT

 This file is part of translate5

 Copyright (c) 2013 - 2021 Marc Mittag; MittagQI - Quality Informatics;  All rights reserved.

 Contact:  http://www.MittagQI.com/  /  service (ATT) MittagQI.com

 This file may be used under the terms of the GNU AFFERO GENERAL PUBLIC LICENSE version 3
 as published by the Free Software Foundation and appearing in the file agpl3-license.txt
 included in the packaging of this file.  Please review the following information
 to ensure the GNU AFFERO GENERAL PUBLIC LICENSE version 3 requirements will be met:
 http://www.gnu.org/licenses/agpl.html

 There is a plugin exception available for use with this release of translate5 for
 translate5: Please see http://www.translate5.net/plugin-exception.txt or
 plugin-exception.txt in the root folder of translate5.

 @copyright  Marc Mittag, MittagQI - Quality Informatics
 @author     MittagQI - Quality Informatics
 @license    GNU AFFERO GENERAL PUBLIC LICENSE version 3 with plugin-execption
             http://www.gnu.org/licenses/agpl.html http://www.translate5.net/plugin-exception.txt

END LICENSE AND COPYRIGHT
*/

namespace MittagQI\Translate5\Test\Unit\Segment;

use MittagQI\Translate5\Test\SegmentTagsTestAbstract;

/**
 * Several "classic" PHPUnit tests to check the OOP Tag-Parsing API with TrackChanges specialities
 * @see RemoveTrackChangesTest
 */
class TrackChangesTest extends SegmentTagsTestAbstract
{
    public function testTrackChanges1(): void
    {
        $segmentId = 766543;
        $markup = 'Lorem ipsum <ins1>dolor sit amet<3/></ins><ins2>, consetetur</ins> sadipscing elitr, <del1>sed diam nonumy<4/></del1> eirmod<del2> tempor invidunt ut</del2>.';
        $textNoTC = 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, eirmod.';
        $markupNoTC = 'Lorem ipsum dolor sit amet<3/>, consetetur sadipscing elitr, eirmod.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges2(): void
    {
        $segmentId = 766543;
        $markup = 'Lorem ipsum <ins1>dolor sit amet<3/></ins1>, <ins2><1>consetetur</1></ins2> sadipscing elitr, sed<del1> diam</del1><del2> nonumy<4/> eirmod</del2><del3> tempor invidunt ut</del3>.';
        $textNoTC = 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed.';
        $markupNoTC = 'Lorem ipsum dolor sit amet<3/>, <1>consetetur</1> sadipscing elitr, sed.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges3(): void
    {
        $segmentId = 766543;
        $markup = 'Lorem ipsum <ins1>dolor sit <ins2>amet<3/>, </ins2><1>consetetur</1></ins1> sadipscing elitr, sed <del1>diam</del1><del2> nonumy<4/> eirmod</del2><del3> tempor invidunt </del3>ut.';
        $textNoTC = 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed ut.';
        $markupNoTC = 'Lorem ipsum dolor sit amet<3/>, <1>consetetur</1> sadipscing elitr, sed ut.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges4(): void
    {
        $segmentId = 766543;
        $markup = 'Lorem ipsum <ins1><ins2>dolor sit amet<3/>, </ins2><1>consetetur</1></ins1> sadipscing elitr, sed<del1> diam</del1><del2> nonumy<4/> eirmod</del2><del3> tempor invidunt </del3>ut.';
        $textNoTC = 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sedut.';
        $markupNoTC = 'Lorem ipsum dolor sit amet<3/>, <1>consetetur</1> sadipscing elitr, sedut.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges5(): void
    {
        // double whitespace arounrd d<del>s will be condensed
        $segmentId = 766543;
        $markup = 'Lorem ipsum <ins1><ins2>dolor sit amet, <1>consetetur</1></ins2></ins1> sadipscing elitr, sed <del1>diam<3/></del1><del2> nonumy eirmod<4/></del2><del3> tempor invidunt</del3> ut.';
        $textNoTC = 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed ut.';
        $markupNoTC = 'Lorem ipsum dolor sit amet, <1>consetetur</1> sadipscing elitr, sed ut.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges6(): void
    {
        // ins/del will invalidate inner ins/dels but not newer del in ins
        $segmentId = 766543;
        $markup = 'Lorem <ins1>ipsum<del2> dolor<4/></del2> sit</ins1> amet, consetetur sadipscing elitr<del1>, sed <ins2>diam nonumy </ins2>eirmod tempor</del1> invidunt ut.';
        $textNoTC = 'Lorem ipsum sit amet, consetetur sadipscing elitr invidunt ut.';
        $markupNoTC = 'Lorem ipsum sit amet, consetetur sadipscing elitr invidunt ut.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges7(): void
    {
        // ins/del will invalidate inner ins/dels but not newer del in ins
        $segmentId = 766543;
        $markup = 'Lorem <ins1>ipsum<del2> dolor</del2><4/> sit</ins1> amet, consetetur sadipscing elitr<del1>, sed <ins2>diam nonumy </ins2>eirmod tempor</del1> invidunt ut.';
        $textNoTC = 'Lorem ipsum sit amet, consetetur sadipscing elitr invidunt ut.';
        $markupNoTC = 'Lorem ipsum<4/> sit amet, consetetur sadipscing elitr invidunt ut.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges8(): void
    {
        // ins/del will invalidate inner ins/dels but not newer del in ins
        $segmentId = 766543;
        $markup = 'Lorem <ins1>ipsum <ins2><ins3>dolor</ins3><4/></ins2> sit amet</ins1>, consetetur sadipscing elitr<del1>, sed <del2>diam<3/><del3> nonumy</del3> eirmod</del2> tempor</del1> invidunt ut.';
        $textNoTC = 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr invidunt ut.';
        $markupNoTC = 'Lorem ipsum dolor<4/> sit amet, consetetur sadipscing elitr invidunt ut.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges9(): void
    {
        // ins/del will invalidate inner ins/dels but not newer del in ins
        $segmentId = 766543;
        $markup = 'Lorem <ins1>ipsum<del2><ins3> dolor</ins3><4/></del2> sit amet</ins1>, consetetur sadipscing elitr<del1>, sed <ins2>diam<3/><del3> nonumy</del3> eirmod</ins2> tempor</del1> invidunt ut.';
        $textNoTC = 'Lorem ipsum sit amet, consetetur sadipscing elitr invidunt ut.';
        $markupNoTC = 'Lorem ipsum sit amet, consetetur sadipscing elitr invidunt ut.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges10(): void
    {
        // ins/del will invalidate inner ins/dels but not newer del in ins
        $segmentId = 766543;
        $markup = 'Lorem <ins1>ipsum <del2><del3>dolor</del3><4/> </del2>sit amet</ins1>, consetetur sadipscing elitr<del1>, sed <ins2>diam<3/><ins3> nonumy</ins3> eirmod</ins2> tempor</del1> invidunt ut.';
        $textNoTC = 'Lorem ipsum sit amet, consetetur sadipscing elitr invidunt ut.';
        $markupNoTC = 'Lorem ipsum sit amet, consetetur sadipscing elitr invidunt ut.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges11(): void
    {
        // ins/del will invalidate inner ins/dels but not newer del in ins
        $segmentId = 766543;
        $markup = 'Lorem <ins1>ipsum <del2><del3>dolor</del3> <4/></del2>sit amet</ins1>, consetetur sadipscing elitr<del1>, sed <ins2>diam<3/><ins3> nonumy</ins3> eirmod</ins2> tempor</del1> invidunt ut.';
        $textNoTC = 'Lorem ipsum sit amet, consetetur sadipscing elitr invidunt ut.';
        $markupNoTC = 'Lorem ipsum sit amet, consetetur sadipscing elitr invidunt ut.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges12(): void
    {
        // ins/del will invalidate inner ins/dels but not newer del in ins
        $segmentId = 766543;
        $markup = 'Lorem ipsum <del1>dolor sit amet<ins1><3/><4/></ins1></del1>, consetetur sadipscing elitr.';
        $textNoTC = 'Lorem ipsum , consetetur sadipscing elitr.';
        $markupNoTC = 'Lorem ipsum , consetetur sadipscing elitr.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges13(): void
    {
        // ins/del will invalidate inner ins/dels but not newer del in ins
        $segmentId = 766543;
        $markup = 'Lorem ipsum <ins1>dolor sit amet<del1> eirmod tempor</del1> invidunt</ins1>, consetetur sadipscing elitr.';
        $textNoTC = 'Lorem ipsum dolor sit amet invidunt, consetetur sadipscing elitr.';
        $markupNoTC = 'Lorem ipsum dolor sit amet invidunt, consetetur sadipscing elitr.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges14(): void
    {
        // ins/del will invalidate inner ins/dels but not newer del in ins
        $segmentId = 766543;
        $markup = 'Lorem ipsum <ins1>dolor sit amet<del1><3/><4/></del1></ins1>, consetetur sadipscing elitr.';
        $textNoTC = 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.';
        $markupNoTC = 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges15(): void
    {
        // ins/del will invalidate inner ins/dels but not newer del in ins
        $segmentId = 766543;
        $markup = 'Lorem ipsum <ins1>dolor sit<del1> amet</del1><ins2><3/><4/></ins2></ins1>, consetetur sadipscing elitr.';
        $textNoTC = 'Lorem ipsum dolor sit, consetetur sadipscing elitr.';
        $markupNoTC = 'Lorem ipsum dolor sit<3/><4/>, consetetur sadipscing elitr.';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testTrackChanges16(): void
    {
        $segmentId = 766543;
        $markup = '<del1>(<1><1><1>5*) Lorem Ipsum</1></1></del1><ins1>(5*) dolor sit amet <div class="term admittedTerm exact" title="" data-tbxid="id6ad172a1-e050-4783-87b9-2b3c6cd39712">cerniera</div> evedunt</ins1><ins2><1></ins2>5*) dolor sit amet <div class="term admittedTerm exact" title="" data-tbxid="id6ad172a1-e050-4783-87b9-2b3c6cd39712">cerniera</div> evedunt<ins3></1></ins3><del2>5</del2><del3>*) </del3><del2>dolor sit amet cerniera evedunt</del2><del3></1></del3><del2>5*) dolor sit amet cerniera evedunt</del2>';
        $textNoTC = '(5*) dolor sit amet cerniera evedunt5*) dolor sit amet cerniera evedunt';
        $markupNoTC = '(5*) dolor sit amet <div class="term admittedTerm exact" title="" data-tbxid="id6ad172a1-e050-4783-87b9-2b3c6cd39712">cerniera</div> evedunt<1>5*) dolor sit amet <div class="term admittedTerm exact" title="" data-tbxid="id6ad172a1-e050-4783-87b9-2b3c6cd39712">cerniera</div> evedunt</1>';

        $this->createReplacedTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testRealData1(): void
    {
        $segmentId = 766543;
        // testing "real" segment content with a sequence of connected segment-tags
        $markup = '<div class="open 6270742069643d2231222063747970653d22782d6974616c69633b636f6c6f723a3030303030303b756e6465726c696e653a73696e676c653b223e266c743b72756e312667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;1&quot; ctype=&quot;x-italic;color:000000;underline:single;&quot;&gt;&amp;lt;run1&amp;gt;&lt;/bpt&gt;">&lt;1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;bpt id=&quot;1&quot; ctype=&quot;x-italic;color:000000;underline:single;&quot;&gt;&amp;lt;run1&amp;gt;&lt;/bpt&gt;</span></div>L<ins class="trackchanges ownttip" data-usertrackingid="17935" data-usercssnr="usernr2" data-workflowstep="reviewing2" data-timestamp="2025-08-22T19:18:16+02:00">’</ins>organisation nationale (réseau de <div class="term admittedTerm stemmed" title="" data-tbxid="393dbd3f-9609-41bb-9d35-117b124da0b1">distribution)</div><div class="close 6570742069643d2231223e266c743b2f72756e312667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;1&quot;&gt;&amp;lt;/run1&amp;gt;&lt;/ept&gt;">&lt;/1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;ept id=&quot;1&quot;&gt;&amp;lt;/run1&amp;gt;&lt;/ept&gt;</span></div><ins class="trackchanges ownttip" data-usertrackingid="17874" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-08-21T16:20:42+02:00"> </ins>agit <ins class="trackchanges ownttip" data-usertrackingid="17874" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-08-21T16:20:43+02:00">de façon à ce </ins><del class="trackchanges ownttip deleted" data-usertrackingid="17874" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-08-21T16:20:46+02:00">en</del><del class="trackchanges ownttip deleted" data-usertrackingid="17874" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-08-21T16:20:47+02:00"> sorte</del><del class="trackchanges ownttip deleted" data-usertrackingid="17874" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-08-21T16:20:48+02:00"> </del>que, dans le <div class="term admittedTerm exact" title="" data-tbxid="d2a84c5d-c9a5-4307-bb77-285fb9735fb0">cadre</div> de la philosophie Neuroth et des <div class="term admittedTerm exact" title="" data-tbxid="8f1f90ff-45c6-428b-aa7e-ba0682d4e9aa">normes</div> du groupe, le plus de personnes possible deviennent et restent des clientes et clients actifs et heureux grâce à ses produits et <div class="term admittedTerm exact" title="" data-tbxid="55f30ba9-d01b-4a78-a79a-c774aeebbabb">services</div> de qualité supérieure.';
        $markupNoTC = '<div class="open 6270742069643d2231222063747970653d22782d6974616c69633b636f6c6f723a3030303030303b756e6465726c696e653a73696e676c653b223e266c743b72756e312667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;1&quot; ctype=&quot;x-italic;color:000000;underline:single;&quot;&gt;&amp;lt;run1&amp;gt;&lt;/bpt&gt;">&lt;1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;bpt id=&quot;1&quot; ctype=&quot;x-italic;color:000000;underline:single;&quot;&gt;&amp;lt;run1&amp;gt;&lt;/bpt&gt;</span></div>L’organisation nationale (réseau de <div class="term admittedTerm stemmed" title="" data-tbxid="393dbd3f-9609-41bb-9d35-117b124da0b1">distribution)</div><div class="close 6570742069643d2231223e266c743b2f72756e312667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;1&quot;&gt;&amp;lt;/run1&amp;gt;&lt;/ept&gt;">&lt;/1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;ept id=&quot;1&quot;&gt;&amp;lt;/run1&amp;gt;&lt;/ept&gt;</span></div> agit de façon à ce que, dans le <div class="term admittedTerm exact" title="" data-tbxid="d2a84c5d-c9a5-4307-bb77-285fb9735fb0">cadre</div> de la philosophie Neuroth et des <div class="term admittedTerm exact" title="" data-tbxid="8f1f90ff-45c6-428b-aa7e-ba0682d4e9aa">normes</div> du groupe, le plus de personnes possible deviennent et restent des clientes et clients actifs et heureux grâce à ses produits et <div class="term admittedTerm exact" title="" data-tbxid="55f30ba9-d01b-4a78-a79a-c774aeebbabb">services</div> de qualité supérieure.';
        // the same markup but TrackChanges merged to a single tag - must obviously bring identical results ...
        $markup2 = '<div class="open 6270742069643d2231222063747970653d22782d6974616c69633b636f6c6f723a3030303030303b756e6465726c696e653a73696e676c653b223e266c743b72756e312667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;1&quot; ctype=&quot;x-italic;color:000000;underline:single;&quot;&gt;&amp;lt;run1&amp;gt;&lt;/bpt&gt;">&lt;1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;bpt id=&quot;1&quot; ctype=&quot;x-italic;color:000000;underline:single;&quot;&gt;&amp;lt;run1&amp;gt;&lt;/bpt&gt;</span></div>L<ins class="trackchanges ownttip" data-usertrackingid="17935" data-usercssnr="usernr2" data-workflowstep="reviewing2" data-timestamp="2025-08-22T19:18:16+02:00">’</ins>organisation nationale (réseau de <div class="term admittedTerm stemmed" title="" data-tbxid="393dbd3f-9609-41bb-9d35-117b124da0b1">distribution)</div><div class="close 6570742069643d2231223e266c743b2f72756e312667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;1&quot;&gt;&amp;lt;/run1&amp;gt;&lt;/ept&gt;">&lt;/1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;ept id=&quot;1&quot;&gt;&amp;lt;/run1&amp;gt;&lt;/ept&gt;</span></div><ins class="trackchanges ownttip" data-usertrackingid="17874" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-08-21T16:20:42+02:00"> </ins>agit <ins class="trackchanges ownttip" data-usertrackingid="17874" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-08-21T16:20:43+02:00">de façon à ce </ins><del class="trackchanges ownttip deleted" data-usertrackingid="17874" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-08-21T16:20:46+02:00">en sorte </del>que, dans le <div class="term admittedTerm exact" title="" data-tbxid="d2a84c5d-c9a5-4307-bb77-285fb9735fb0">cadre</div> de la philosophie Neuroth et des <div class="term admittedTerm exact" title="" data-tbxid="8f1f90ff-45c6-428b-aa7e-ba0682d4e9aa">normes</div> du groupe, le plus de personnes possible deviennent et restent des clientes et clients actifs et heureux grâce à ses produits et <div class="term admittedTerm exact" title="" data-tbxid="55f30ba9-d01b-4a78-a79a-c774aeebbabb">services</div> de qualité supérieure.';
        $textNoTC = 'L’organisation nationale (réseau de distribution) agit de façon à ce que, dans le cadre de la philosophie Neuroth et des normes du groupe, le plus de personnes possible deviennent et restent des clientes et clients actifs et heureux grâce à ses produits et services de qualité supérieure.';

        $this->createTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
        $this->createTrackChangesTest($segmentId, $markup2, $textNoTC, $markupNoTC);
    }

    public function testRealData2(): void
    {
        $segmentId = 766543;
        // testing "real" segment content with a sequence of connected segment-tags
        $markup = 'Senzor tlaka AD<div class="single 6e756d62657220747970653d22696e746567657222206e616d653d22616e79206e756d62657220286e6f742070617274206f662068797068656e6174656420636f6d706f756e64292220736f757263653d2237222069736f3d223722207461726765743d2237222072656765783d22303965777431474d4e7443316a4e58554146506132706f61396f713630596d365659363655596558484e3532654d2f686c73505444732b4a3164514841413d3d222f number internal-tag ownttip"><span class="short" title="&lt;1/&gt; CP: any number (not part of hyphenated compound)">&lt;1/&gt;</span><span class="full" data-originalid="number" data-length="1" data-source="7" data-target="7"></span></div> ... <del class="trackchanges ownttip deleted" data-usertrackingid="65812" data-usercssnr="usernr2" data-workflowstep="review2ndlanguage1" data-timestamp="2025-08-27T14:56:49+02:00"><div class="single 6e756d62657220747970653d226b6565702d636f6e74656e7422206e616d653d226361706974616c206c6574746572202b206469676974202d20696e20544d206f6e6c792220736f757263653d2241443130222069736f3d224144313022207461726765743d2241443130222072656765783d223039654971346b70726f6e5271446d3051464e44493970524e796f6d4a565a544738794b6a556d7069556b42737a515255706f614b6a58524d586f36316c6232696a48464d5a71484673527136674d41222f number internal-tag ownttip"><span class="short" title="&lt;2/&gt; CP: capital letter + digit - in TM only">&lt;2/&gt;</span><span class="full" data-originalid="number" data-length="4" data-source="AD10" data-target="AD10"></span></div></del>';
        $textNoTC = 'Senzor tlaka AD ... ';
        $markupNoTC = 'Senzor tlaka AD<div class="single 6e756d62657220747970653d22696e746567657222206e616d653d22616e79206e756d62657220286e6f742070617274206f662068797068656e6174656420636f6d706f756e64292220736f757263653d2237222069736f3d223722207461726765743d2237222072656765783d22303965777431474d4e7443316a4e58554146506132706f61396f713630596d365659363655596558484e3532654d2f686c73505444732b4a3164514841413d3d222f number internal-tag ownttip"><span class="short" title="&lt;1/&gt; CP: any number (not part of hyphenated compound)">&lt;1/&gt;</span><span class="full" data-originalid="number" data-length="1" data-source="7" data-target="7"></span></div> ... ';

        $this->createTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testRealData3(): void
    {
        $segmentId = 766543;
        // testing "real" segment content with a sequence of connected segment-tags
        $markup = 'Utilise<ins class="trackchanges ownttip" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:58:46+04:00">z</ins> <div class="open 6270742069643d2231222063747970653d22782d626f6c643b666f6e74733a417269616c3b223e266c743b72756e312667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;1&quot; ctype=&quot;x-bold;fonts:Arial;&quot;&gt;&amp;lt;run1&amp;gt;&lt;/bpt&gt;">&lt;1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;bpt id="1" ctype="x-bold;fonts:Arial;"&gt;&amp;lt;run1&amp;gt;&lt;/bpt&gt;</span></div>13<div class="close 6570742069643d2231223e266c743b2f72756e312667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;1&quot;&gt;&amp;lt;/run1&amp;gt;&lt;/ept&gt;">&lt;/1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;ept id="1"&gt;&amp;lt;/run1&amp;gt;&lt;/ept&gt;</span></div> <div class="open 6270742069643d2232222063747970653d22782d626f6c643b666f6e74733a417269616c3b223e266c743b72756e322667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;2&quot; ctype=&quot;x-bold;fonts:Arial;&quot;&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;">&lt;2&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;bpt id="2" ctype="x-bold;fonts:Arial;"&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;</span></div><ins class="trackchanges ownttip" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:58:49+04:00">p</ins><del class="trackchanges ownttip deleted" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:58:48+04:00">P</del>laques de poids<div class="close 6570742069643d2232223e266c743b2f72756e322667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;2&quot;&gt;&amp;lt;/run2&amp;gt;&lt;/ept&gt;">&lt;/2&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;ept id="2"&gt;&amp;lt;/run2&amp;gt;&lt;/ept&gt;</span></div> + <del class="trackchanges ownttip deleted" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:58:57+04:00">Étui de plongée invisible</del><del class="trackchanges ownttip deleted" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:58:59+04:00"> </del><div class="open 6270742069643d2233222063747970653d22782d626f6c643b666f6e74733a417269616c3b223e266c743b72756e332667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;3&quot; ctype=&quot;x-bold;fonts:Arial;&quot;&gt;&amp;lt;run3&amp;gt;&lt;/bpt&gt;">&lt;3&gt;</span><span class="full" data-originalid="3" data-length="-1">&lt;bpt id="3" ctype="x-bold;fonts:Arial;"&gt;&amp;lt;run3&amp;gt;&lt;/bpt&gt;</span></div><del class="trackchanges ownttip deleted" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:59:02+04:00">Bloc de poids</del><ins class="trackchanges ownttip" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:59:03+04:00">plomb </ins><div class="close 6570742069643d2233223e266c743b2f72756e332667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;3&quot;&gt;&amp;lt;/run3&amp;gt;&lt;/ept&gt;">&lt;/3&gt;</span><span class="full" data-originalid="3" data-length="-1">&lt;ept id="3"&gt;&amp;lt;/run3&amp;gt;&lt;/ept&gt;</span></div><ins class="trackchanges ownttip" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:59:08+04:00"> </ins><ins class="trackchanges ownttip" data-usertrackingid="137513" data-usercssnr="usernr2" data-workflowstep="reviewing2" data-timestamp="2025-09-02T14:35:20+08:00">et le</ins><del class="trackchanges ownttip deleted" data-usertrackingid="137513" data-usercssnr="usernr2" data-workflowstep="reviewing2" data-timestamp="2025-09-02T14:35:20+08:00" data-historylist="1756706348000" data-action_history_1756706348000="INS" data-usertrackingid_history_1756706348000="137172">d</del><del class="trackchanges ownttip deleted" data-usertrackingid="137513" data-usercssnr="usernr2" data-workflowstep="reviewing2" data-timestamp="2025-09-02T14:35:19+08:00" data-historylist="1756706348000" data-action_history_1756706348000="INS" data-usertrackingid_history_1756706348000="137172">e</del><ins class="trackchanges ownttip" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:59:08+04:00"> <div class="term admittedTerm lowercase" title="" data-tbxid="272dc402-4588-4fd2-9717-c84bec38fb92">caisson de plongée</div> invisible</ins>.';
        $textNoTC = 'Utilisez 13 plaques de poids + plomb  et le caisson de plongée invisible.';
        $markupNoTC = 'Utilisez <div class="open 6270742069643d2231222063747970653d22782d626f6c643b666f6e74733a417269616c3b223e266c743b72756e312667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;1&quot; ctype=&quot;x-bold;fonts:Arial;&quot;&gt;&amp;lt;run1&amp;gt;&lt;/bpt&gt;">&lt;1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;bpt id="1" ctype="x-bold;fonts:Arial;"&gt;&amp;lt;run1&amp;gt;&lt;/bpt&gt;</span></div>13<div class="close 6570742069643d2231223e266c743b2f72756e312667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;1&quot;&gt;&amp;lt;/run1&amp;gt;&lt;/ept&gt;">&lt;/1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;ept id="1"&gt;&amp;lt;/run1&amp;gt;&lt;/ept&gt;</span></div> <div class="open 6270742069643d2232222063747970653d22782d626f6c643b666f6e74733a417269616c3b223e266c743b72756e322667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;2&quot; ctype=&quot;x-bold;fonts:Arial;&quot;&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;">&lt;2&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;bpt id="2" ctype="x-bold;fonts:Arial;"&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;</span></div>plaques de poids<div class="close 6570742069643d2232223e266c743b2f72756e322667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;2&quot;&gt;&amp;lt;/run2&amp;gt;&lt;/ept&gt;">&lt;/2&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;ept id="2"&gt;&amp;lt;/run2&amp;gt;&lt;/ept&gt;</span></div> + <div class="open 6270742069643d2233222063747970653d22782d626f6c643b666f6e74733a417269616c3b223e266c743b72756e332667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;3&quot; ctype=&quot;x-bold;fonts:Arial;&quot;&gt;&amp;lt;run3&amp;gt;&lt;/bpt&gt;">&lt;3&gt;</span><span class="full" data-originalid="3" data-length="-1">&lt;bpt id="3" ctype="x-bold;fonts:Arial;"&gt;&amp;lt;run3&amp;gt;&lt;/bpt&gt;</span></div>plomb <div class="close 6570742069643d2233223e266c743b2f72756e332667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;3&quot;&gt;&amp;lt;/run3&amp;gt;&lt;/ept&gt;">&lt;/3&gt;</span><span class="full" data-originalid="3" data-length="-1">&lt;ept id="3"&gt;&amp;lt;/run3&amp;gt;&lt;/ept&gt;</span></div> et le <div class="term admittedTerm lowercase" title="" data-tbxid="272dc402-4588-4fd2-9717-c84bec38fb92">caisson de plongée</div> invisible.';

        $this->createTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testRealData4(): void
    {
        $segmentId = 766543;
        // testing "real" segment content with a sequence of connected segment-tags
        $markup = '<del class="trackchanges ownttip deleted" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:58:57+04:00">Étui de plongée invisible</del><del class="trackchanges ownttip deleted" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:58:59+04:00"> </del><div class="open 6270742069643d2233222063747970653d22782d626f6c643b666f6e74733a417269616c3b223e266c743b72756e332667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;3&quot; ctype=&quot;x-bold;fonts:Arial;&quot;&gt;&amp;lt;run3&amp;gt;&lt;/bpt&gt;">&lt;3&gt;</span><span class="full" data-originalid="3" data-length="-1">&lt;bpt id="3" ctype="x-bold;fonts:Arial;"&gt;&amp;lt;run3&amp;gt;&lt;/bpt&gt;</span></div><del class="trackchanges ownttip deleted" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:59:02+04:00">Bloc de poids</del><ins class="trackchanges ownttip" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:59:03+04:00">plomb </ins><div class="close 6570742069643d2233223e266c743b2f72756e332667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;3&quot;&gt;&amp;lt;/run3&amp;gt;&lt;/ept&gt;">&lt;/3&gt;</span><span class="full" data-originalid="3" data-length="-1">&lt;ept id="3"&gt;&amp;lt;/run3&amp;gt;&lt;/ept&gt;</span></div><ins class="trackchanges ownttip" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:59:08+04:00"> </ins><ins class="trackchanges ownttip" data-usertrackingid="137513" data-usercssnr="usernr2" data-workflowstep="reviewing2" data-timestamp="2025-09-02T14:35:20+08:00">et le</ins><del class="trackchanges ownttip deleted" data-usertrackingid="137513" data-usercssnr="usernr2" data-workflowstep="reviewing2" data-timestamp="2025-09-02T14:35:20+08:00" data-historylist="1756706348000" data-action_history_1756706348000="INS" data-usertrackingid_history_1756706348000="137172">d</del><del class="trackchanges ownttip deleted" data-usertrackingid="137513" data-usercssnr="usernr2" data-workflowstep="reviewing2" data-timestamp="2025-09-02T14:35:19+08:00" data-historylist="1756706348000" data-action_history_1756706348000="INS" data-usertrackingid_history_1756706348000="137172">e</del><ins class="trackchanges ownttip" data-usertrackingid="137172" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-01T09:59:08+04:00">    <div class="term admittedTerm lowercase" title="" data-tbxid="272dc402-4588-4fd2-9717-c84bec38fb92">caisson de plongée</div>    invisible</ins>';
        $textNoTC = 'plomb  et le    caisson de plongée    invisible';
        $markupNoTC = '<div class="open 6270742069643d2233222063747970653d22782d626f6c643b666f6e74733a417269616c3b223e266c743b72756e332667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;3&quot; ctype=&quot;x-bold;fonts:Arial;&quot;&gt;&amp;lt;run3&amp;gt;&lt;/bpt&gt;">&lt;3&gt;</span><span class="full" data-originalid="3" data-length="-1">&lt;bpt id="3" ctype="x-bold;fonts:Arial;"&gt;&amp;lt;run3&amp;gt;&lt;/bpt&gt;</span></div>plomb <div class="close 6570742069643d2233223e266c743b2f72756e332667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;3&quot;&gt;&amp;lt;/run3&amp;gt;&lt;/ept&gt;">&lt;/3&gt;</span><span class="full" data-originalid="3" data-length="-1">&lt;ept id="3"&gt;&amp;lt;/run3&amp;gt;&lt;/ept&gt;</span></div> et le    <div class="term admittedTerm lowercase" title="" data-tbxid="272dc402-4588-4fd2-9717-c84bec38fb92">caisson de plongée</div>    invisible';

        $this->createTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testRealData5(): void
    {
        $segmentId = 766543;
        // testing "real" segment content with a sequence of connected segment-tags
        $markup = '<del class="trackchanges ownttip deleted" data-usertrackingid="140480" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-22T16:28:22+04:00"><div class="open 6270742069643d2232222063747970653d22782d626f6c643b636f6c6f723a3146323332393b666f6e74733a43616c696272693b223e266c743b72756e322667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;2&quot; ctype=&quot;x-bold;color:1F2329;fonts:Calibri;&quot;&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;">&lt;1&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;bpt id="2" ctype="x-bold;color:1F2329;fonts:Calibri;"&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;</span></div>Pour le cloud, alimenté par AWS, <div class="close 6570742069643d2232223e266c743b2f72756e322667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;2&quot;&gt;&amp;lt;/run2&amp;gt;&lt;/ept&gt;">&lt;/1&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;ept id="2"&gt;&amp;lt;/run2&amp;gt;&lt;/ept&gt;</span></div>nous respectons les normes de conformité les plus strictes en matière de sécurité des données pour que tes fichiers soient sécurisés et tes données protégées (ISO 27001/27701, ISO 27017/27018 et CSA STAR).<ins class="trackchanges ownttip" data-usertrackingid="140480" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-22T16:28:22+04:00"><div class="open 6270742069643d2232222063747970653d22782d626f6c643b636f6c6f723a3146323332393b666f6e74733a43616c696272693b223e266c743b72756e322667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;2&quot; ctype=&quot;x-bold;color:1F2329;fonts:Calibri;&quot;&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;">&lt;1&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;bpt id="2" ctype="x-bold;color:1F2329;fonts:Calibri;"&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;</span></div><div class="open 6270742069643d2232222063747970653d22782d626f6c643b636f6c6f723a3146323332393b666f6e74733a43616c696272693b223e266c743b72756e322667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;2&quot; ctype=&quot;x-bold;color:1F2329;fonts:Calibri;&quot;&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;">&lt;1&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;bpt id="2" ctype="x-bold;color:1F2329;fonts:Calibri;"&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;</span></div></ins></del><ins class="trackchanges ownttip" data-usertrackingid="140480" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-22T16:28:22+04:00"><div class="open 6270742069643d2232222063747970653d22782d626f6c643b636f6c6f723a3146323332393b666f6e74733a43616c696272693b223e266c743b72756e322667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;2&quot; ctype=&quot;x-bold;color:1F2329;fonts:Calibri;&quot;&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;">&lt;1&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;bpt id="2" ctype="x-bold;color:1F2329;fonts:Calibri;"&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;</span></div>Pour le cloud, propulsé par AWS,</ins><ins class="trackchanges ownttip" data-usertrackingid="140569" data-usercssnr="usernr3" data-workflowstep="translation1" data-timestamp="2025-09-23T16:26:51+02:00"> </ins><ins class="trackchanges ownttip" data-usertrackingid="140480" data-usercssnr="usernr1" data-workflowstep="translation1" data-timestamp="2025-09-22T16:28:22+04:00"><div class="close 6570742069643d2232223e266c743b2f72756e322667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;2&quot;&gt;&amp;lt;/run2&amp;gt;&lt;/ept&gt;">&lt;/1&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;ept id="2"&gt;&amp;lt;/run2&amp;gt;&lt;/ept&gt;</span></div>nous respectons les normes de conformité les plus strictes en matière de sécurité des données afin de protéger vos fichiers et vos informations (ISO 27001/27701, ISO 27017/27018 et CSA STAR).</ins>';
        $textNoTC = 'Pour le cloud, propulsé par AWS, nous respectons les normes de conformité les plus strictes en matière de sécurité des données afin de protéger vos fichiers et vos informations (ISO 27001/27701, ISO 27017/27018 et CSA STAR).';
        $markupNoTC = '<div class="open 6270742069643d2232222063747970653d22782d626f6c643b636f6c6f723a3146323332393b666f6e74733a43616c696272693b223e266c743b72756e322667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;2&quot; ctype=&quot;x-bold;color:1F2329;fonts:Calibri;&quot;&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;">&lt;1&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;bpt id="2" ctype="x-bold;color:1F2329;fonts:Calibri;"&gt;&amp;lt;run2&amp;gt;&lt;/bpt&gt;</span></div>Pour le cloud, propulsé par AWS, <div class="close 6570742069643d2232223e266c743b2f72756e322667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;2&quot;&gt;&amp;lt;/run2&amp;gt;&lt;/ept&gt;">&lt;/1&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;ept id="2"&gt;&amp;lt;/run2&amp;gt;&lt;/ept&gt;</span></div>nous respectons les normes de conformité les plus strictes en matière de sécurité des données afin de protéger vos fichiers et vos informations (ISO 27001/27701, ISO 27017/27018 et CSA STAR).';
        $this->createTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testRealData6(): void
    {
        $segmentId = 766543;
        // testing "real" segment content with a sequence of connected segment-tags
        $markup = '<del class="trackchanges ownttip deleted" data-usertrackingid="83364" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-18T12:46:40+02:00">Будь ласка, ознайомтесь з Декларацією відповідності ЄС щодо діапазону використання: www.url.com/catalogue/... d Support/Downloads.<ins class="trackchanges ownttip" data-usertrackingid="83364" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-18T12:46:43+02:00">Будь ласка, ознайомтесь з Декларацією відповідності ЄС щодо діапазону використання</ins></del><ins class="trackchanges ownttip" data-usertrackingid="83364" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-18T12:46:51+02:00">Будь ласка, ознайомтесь з Декларацією відповідності ЄС щодо можливості використання</ins><ins class="trackchanges ownttip" data-usertrackingid="83364" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-18T12:46:43+02:00"> : www.url.com/catalogue/...</ins>';
        $textNoTC = 'Будь ласка, ознайомтесь з Декларацією відповідності ЄС щодо можливості використання : www.url.com/catalogue/...';
        $markupNoTC = 'Будь ласка, ознайомтесь з Декларацією відповідності ЄС щодо можливості використання : www.url.com/catalogue/...';
        $this->createTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testRealData7(): void
    {
        $segmentId = 766543;
        // testing "real" segment content with a sequence of connected segment-tags
        $markup = '<ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:28:52+01:00">E, naturalmente, a possibilidade de selecionar múltiplas </ins><del class="trackchanges ownttip deleted" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:12+01:00"><ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:27+01:00">al</ins><ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:26+01:00">pitlú</ins><ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:25+01:00">m</ins><ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:21+01:00"> salpi</ins><ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:20+01:00">tlú</ins><ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:19+01:00">m</ins></del><del class="trackchanges ownttip deleted" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:10+01:00">Obviamente, </del><del class="trackchanges ownttip deleted" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:40+01:00">um grande número de </del>funções de vácuo<ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:54+01:00"> </ins><del class="trackchanges ownttip deleted" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:51+01:00"> pode ser selecionado </del>em um terminal de válvula<ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:58+01:00">s</ins>.';
        $textNoTC = 'E, naturalmente, a possibilidade de selecionar múltiplas funções de vácuo em um terminal de válvulas.';
        $markupNoTC = 'E, naturalmente, a possibilidade de selecionar múltiplas funções de vácuo em um terminal de válvulas.';
        $this->createTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testRealData8(): void
    {
        $segmentId = 766543;
        // testing "real" segment content with a sequence of connected segment-tags
        $markup = '<ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:28:52+01:00">E, naturalmente, a possibilidade de selecionar múltiplas </ins><del class="trackchanges ownttip deleted" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:12+01:00"><ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:27+01:00">al</ins><ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:26+01:00">pitlú</ins><ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:25+01:00">m</ins><ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:21+01:00"> salpi</ins><ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:20+01:00">tlú</ins><ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:19+01:00">m</ins></del><del class="trackchanges ownttip deleted" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:10+01:00">Obviamente, </del><del class="trackchanges ownttip deleted" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:40+01:00">um grande número de </del>funções de vácuo<ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:54+01:00"> </ins><del class="trackchanges ownttip deleted" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:51+01:00"> pode ser selecionado </del>em um terminal de válvula<ins class="trackchanges ownttip" data-usertrackingid="83570" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-19T10:29:58+01:00">s</ins>.';
        $textNoTC = 'E, naturalmente, a possibilidade de selecionar múltiplas funções de vácuo em um terminal de válvulas.';
        $markupNoTC = 'E, naturalmente, a possibilidade de selecionar múltiplas funções de vácuo em um terminal de válvulas.';
        $this->createTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testRealData9(): void
    {
        $segmentId = 766543;
        // testing "real" segment content with a sequence of connected segment-tags
        $markup = 'Компания от <div class="open 6270742069643d2231222063747970653d22782d62223e266c743b622667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;1&quot; ctype=&quot;x-b&quot;&gt;&amp;lt;b&amp;gt;&lt;/bpt&gt;">&lt;1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;bpt id="1" ctype="x-b"&gt;&amp;lt;b&amp;gt;&lt;/bpt&gt;</span></div>автомобил<del class="trackchanges ownttip deleted" data-usertrackingid="81060" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-09T05:23:15+02:00">ната индустрия</del><ins class="trackchanges ownttip" data-usertrackingid="81060" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-09T05:23:15+02:00">остроителния отрасъл</ins> <div class="close 6570742069643d2231223e266c743b2f622667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;1&quot;&gt;&amp;lt;/b&amp;gt;&lt;/ept&gt;">&lt;/1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;ept id="1"&gt;&amp;lt;/b&amp;gt;&lt;/ept&gt;</span></div>използва <div class="open 6270742069643d2232222063747970653d22782d62223e266c743b62206c696e6b74656d706c6174653d2671756f743b6c745f696e7465726e616c5f746578746c696e6b5f636f7079746578745f5f6d61737465722671756f743b2074732d6c696e6b2d636f6e7461696e65722d69643d2671756f743b642d37306661623033302d326264622d343066302d393730322d3731613765623361656439612d312671756f743b20747970653d2671756f743b67656e657269634c696e6b2671756f743b2667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;2&quot; ctype=&quot;x-b&quot;&gt;&amp;lt;b linktemplate=&amp;quot;lt_internal_textlink_copytext__master&amp;quot; ts-link-container-id=&amp;quot;d-70fab030-2bdb-40f0-9702-71a7eb3aed9a-1&amp;quot; type=&amp;quot;genericLink&amp;quot;&amp;gt;&lt;/bpt&gt;">&lt;2&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;bpt id="2" ctype="x-b"&gt;&amp;lt;b linktemplate=&amp;quot;lt_internal_textlink_copytext__master&amp;quot; ts-link-container-id=&amp;quot;d-70fab030-2bdb-40f0-9702-71a7eb3aed9a-1&amp;quot; type=&amp;quot;genericLink&amp;quot;&amp;gt;&lt;/bpt&gt;</span></div>Microsoft AX Industrial Intelligence<div class="close 6570742069643d2232223e266c743b2f622667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;2&quot;&gt;&amp;lt;/b&amp;gt;&lt;/ept&gt;">&lt;/2&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;ept id="2"&gt;&amp;lt;/b&amp;gt;&lt;/ept&gt;</span></div> за подобряване на <del class="trackchanges ownttip deleted" data-usertrackingid="81060" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-09T05:24:11+02:00">наличността<ins class="trackchanges ownttip" data-usertrackingid="81060" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-09T05:24:11+02:00">Коефициент на използване</ins></del><ins class="trackchanges ownttip" data-usertrackingid="81060" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-09T09:35:09+02:00">коефициента на използване</ins> на машините и <del class="trackchanges ownttip deleted" data-usertrackingid="81060" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-09T05:25:14+02:00">осигуряване</del><ins class="trackchanges ownttip" data-usertrackingid="81060" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2025-11-09T05:25:14+02:00">контрола</ins> на качеството в производството на каросерии.';
        $textNoTC = 'Компания от автомобилостроителния отрасъл използва Microsoft AX Industrial Intelligence за подобряване на коефициента на използване на машините и контрола на качеството в производството на каросерии.';
        $markupNoTC = 'Компания от <div class="open 6270742069643d2231222063747970653d22782d62223e266c743b622667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;1&quot; ctype=&quot;x-b&quot;&gt;&amp;lt;b&amp;gt;&lt;/bpt&gt;">&lt;1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;bpt id="1" ctype="x-b"&gt;&amp;lt;b&amp;gt;&lt;/bpt&gt;</span></div>автомобилостроителния отрасъл <div class="close 6570742069643d2231223e266c743b2f622667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;1&quot;&gt;&amp;lt;/b&amp;gt;&lt;/ept&gt;">&lt;/1&gt;</span><span class="full" data-originalid="1" data-length="-1">&lt;ept id="1"&gt;&amp;lt;/b&amp;gt;&lt;/ept&gt;</span></div>използва <div class="open 6270742069643d2232222063747970653d22782d62223e266c743b62206c696e6b74656d706c6174653d2671756f743b6c745f696e7465726e616c5f746578746c696e6b5f636f7079746578745f5f6d61737465722671756f743b2074732d6c696e6b2d636f6e7461696e65722d69643d2671756f743b642d37306661623033302d326264622d343066302d393730322d3731613765623361656439612d312671756f743b20747970653d2671756f743b67656e657269634c696e6b2671756f743b2667743b3c2f627074 internal-tag ownttip"><span class="short" title="&lt;bpt id=&quot;2&quot; ctype=&quot;x-b&quot;&gt;&amp;lt;b linktemplate=&amp;quot;lt_internal_textlink_copytext__master&amp;quot; ts-link-container-id=&amp;quot;d-70fab030-2bdb-40f0-9702-71a7eb3aed9a-1&amp;quot; type=&amp;quot;genericLink&amp;quot;&amp;gt;&lt;/bpt&gt;">&lt;2&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;bpt id="2" ctype="x-b"&gt;&amp;lt;b linktemplate=&amp;quot;lt_internal_textlink_copytext__master&amp;quot; ts-link-container-id=&amp;quot;d-70fab030-2bdb-40f0-9702-71a7eb3aed9a-1&amp;quot; type=&amp;quot;genericLink&amp;quot;&amp;gt;&lt;/bpt&gt;</span></div>Microsoft AX Industrial Intelligence<div class="close 6570742069643d2232223e266c743b2f622667743b3c2f657074 internal-tag ownttip"><span class="short" title="&lt;ept id=&quot;2&quot;&gt;&amp;lt;/b&amp;gt;&lt;/ept&gt;">&lt;/2&gt;</span><span class="full" data-originalid="2" data-length="-1">&lt;ept id="2"&gt;&amp;lt;/b&amp;gt;&lt;/ept&gt;</span></div> за подобряване на коефициента на използване на машините и контрола на качеството в производството на каросерии.';
        $this->createTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testRealData10(): void
    {
        $segmentId = 766543;
        // testing "real" segment content with a sequence of connected segment-tags
        $markup = '<del class="trackchanges ownttip deleted" data-usertrackingid="82776" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2025-11-15T16:54:53+01:00">Socio oficial de Microsoft</del><ins class="trackchanges ownttip" data-usertrackingid="82776" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2025-11-15T16:54:53+01:00">Microsoft Official Partner <del class="trackchanges ownttip deleted" data-usertrackingid="82776" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2025-11-15T16:55:05+01:00">: </del>– </ins>encuentre su <div class="term preferredTerm exact" title="" data-tbxid="7b44115c-b8a0-41e1-b376-2a0c328ab385">distribuidor</div><del class="trackchanges ownttip deleted" data-usertrackingid="82776" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2025-11-15T16:55:09+01:00"> autorizado</del>';
        $textNoTC = 'Microsoft Official Partner – encuentre su distribuidor';
        $markupNoTC = 'Microsoft Official Partner – encuentre su <div class="term preferredTerm exact" title="" data-tbxid="7b44115c-b8a0-41e1-b376-2a0c328ab385">distribuidor</div>';
        $this->createTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testRealData11(): void
    {
        $segmentId = 766543;
        // testing "real" segment content with a sequence of connected segment-tags
        $markup = '手動モードでは、<del class="trackchanges ownttip deleted" data-usertrackingid="" data-usercssnr="usernr" data-workflowstep="" data-timestamp="2025-06-24T12:29:51+02:00">レシプロ</del><ins class="trackchanges ownttip" data-usertrackingid="" data-usercssnr="usernr" data-workflowstep="" data-timestamp="2025-06-24T12:29:51+02:00"><del class="trackchanges ownttip deleted" data-usertrackingid="" data-usercssnr="usernr" data-workflowstep="" data-timestamp="2025-06-24T12:34:41+02:00">往復運動装置</del><ins class="trackchanges ownttip" data-usertrackingid="" data-usercssnr="usernr" data-workflowstep="" data-timestamp="2025-06-24T12:34:41+02:00"><del class="trackchanges ownttip deleted" data-usertrackingid="" data-usercssnr="usernr" data-workflowstep="" data-timestamp="2025-07-02T21:11:38+02:00">レシプロ</del><ins class="trackchanges ownttip" data-usertrackingid="" data-usercssnr="usernr" data-workflowstep="" data-timestamp="2025-07-02T21:11:38+02:00"></ins></ins></ins><del class="trackchanges ownttip deleted" data-usertrackingid="" data-usercssnr="usernr" data-workflowstep="" data-timestamp="2025-07-03T20:49:15+02:00">レシプロケーターケータ</del><ins class="trackchanges ownttip" data-usertrackingid="" data-usercssnr="usernr" data-workflowstep="" data-timestamp="2025-07-03T20:49:15+02:00">レシプロケーター</ins>を手動で動かし、<del class="trackchanges ownttip deleted" data-usertrackingid="" data-usercssnr="usernr" data-workflowstep="" data-timestamp="2025-07-05T03:10:09+02:00">コンベヤ</del><ins class="trackchanges ownttip" data-usertrackingid="" data-usercssnr="usernr" data-workflowstep="" data-timestamp="2025-07-05T03:10:09+02:00">コンベヤー</ins>に吊り下げられた<del class="trackchanges ownttip deleted" data-usertrackingid="" data-usercssnr="usernr" data-workflowstep="" data-timestamp="2025-06-30T13:45:21+02:00">ワーク</del><ins class="trackchanges ownttip" data-usertrackingid="" data-usercssnr="usernr" data-workflowstep="" data-timestamp="2025-06-30T13:45:21+02:00">被塗物</ins>を使って位置決めします。';
        $textNoTC = '手動モードでは、レシプロケーターを手動で動かし、コンベヤーに吊り下げられた被塗物を使って位置決めします。';
        $markupNoTC = '手動モードでは、レシプロケーターを手動で動かし、コンベヤーに吊り下げられた被塗物を使って位置決めします。';
        $this->createTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    public function testRealData12(): void
    {
        $segmentId = 766543;
        $markup = '<del class="trackchanges ownttip deleted" data-usertrackingid="503" data-usercssnr="usernr3" data-workflowstep="translation1" data-timestamp="2026-01-16T09:56:52+01:00">2 porte, parete posteriore<div class="single 736f667452657475726e2f newline internal-tag ownttip"><span class="short" title="&lt;1/&gt;: Newline">&lt;1/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div>incastonata davanti al centro<div class="single 736f667452657475726e2f newline internal-tag ownttip"><span class="short" title="&lt;2/&gt;: Newline">&lt;2/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div>Ripiani in metallo di 8 cm di profondit\u00e0 per le spezie<div class="single 736f667452657475726e2f newline internal-tag ownttip"><span class="short" title="&lt;3/&gt;: Newline">&lt;3/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div>1 ripiano regolabile a sinistra e 1 ripiano regolabile a destra<div class="single 736f667452657475726e2f newline internal-tag ownttip"><span class="short" title="&lt;4/&gt;: Newline">&lt;4/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div></del><ins class="trackchanges ownttip" data-usertrackingid="503" data-usercssnr="usernr3" data-workflowstep="translation1" data-timestamp="2026-01-16T09:56:52+01:00">2 ante, parete posteriore</ins><ins class="trackchanges ownttip" data-usertrackingid="881" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T15:01:54+01:00"><div class="single 736f667452657475726e2f newline whitespace internal-tag ownttip"><span class="short" title="&lt;17/&gt;: Newline">&lt;17/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div></ins><ins class="trackchanges ownttip" data-usertrackingid="503" data-usercssnr="usernr3" data-workflowstep="translation1" data-timestamp="2026-01-16T09:56:52+01:00">sporgente al centro<div class="single 736f667452657475726e2f newline internal-tag ownttip"><span class="short" title="&lt;3/&gt;: Newline">&lt;3/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div>Ripiani in metallo profondit\u00e0<div class="single 736f667452657475726e2f newline internal-tag ownttip"><span class="short" title="&lt;4/&gt;: Newline">&lt;4/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div>8 cm per spezie<div class="single 736f667452657475726e2f newline internal-tag ownttip"><span class="short" title="&lt;5/&gt;: Newline">&lt;5/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div>Risp. 1 ripiano interno<div class="single 736f667452657475726e2f newline internal-tag ownttip"><span class="short" title="&lt;6/&gt;: Newline">&lt;6/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div>regolabile sinistra e destra</ins><del class="trackchanges ownttip deleted" data-usertrackingid="881" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T15:01:48+01:00">porgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="881" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T13:18:22+01:00">porgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="881" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T13:07:28+01:00">porgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="881" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T13:05:47+01:00">porgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="881" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T13:01:41+01:00">porgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="881" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T13:00:18+01:00">sporgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="881" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T12:56:56+01:00">porgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="881" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T12:56:19+01:00" data-historylist="1770292454000" data-action_history_1770292454000="INS" data-usertrackingid_history_1770292454000="860"><div class="single 736f667452657475726e2f newline whitespace internal-tag ownttip"><span class="short" title="&lt;16/&gt;: Newline">&lt;16/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div></del><del class="trackchanges ownttip deleted" data-usertrackingid="881" data-usercssnr="usernr2" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T12:56:16+01:00">porgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="860" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T12:54:07+01:00">sporgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="860" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T12:52:05+01:00">sporgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="860" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T12:51:13+01:00" data-historylist="1770277749000" data-action_history_1770277749000="INS" data-usertrackingid_history_1770277749000="801"><div class="single 736f667452657475726e2f newline whitespace internal-tag ownttip"><span class="short" title="&lt;15/&gt;: Newline">&lt;15/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div></del><del class="trackchanges ownttip deleted" data-usertrackingid="860" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T12:51:12+01:00">s</del><del class="trackchanges ownttip deleted" data-usertrackingid="860" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T12:51:11+01:00">porg</del><del class="trackchanges ownttip deleted" data-usertrackingid="860" data-usercssnr="usernr1" data-workflowstep="firsttranslation1" data-timestamp="2026-02-05T12:51:10+01:00">ente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="801" data-usercssnr="usernr5" data-workflowstep="reviewing2" data-timestamp="2026-02-05T08:48:55+01:00" data-historylist="1770271878000" data-action_history_1770271878000="INS" data-usertrackingid_history_1770271878000="450"><div class="single 736f667452657475726e2f newline whitespace internal-tag ownttip"><span class="short" title="&lt;14/&gt;: Newline">&lt;14/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div></del><del class="trackchanges ownttip deleted" data-usertrackingid="801" data-usercssnr="usernr5" data-workflowstep="reviewing2" data-timestamp="2026-02-05T08:48:54+01:00">sporgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="450" data-usercssnr="usernr2" data-workflowstep="translation1" data-timestamp="2026-02-05T07:11:23+01:00" data-historylist="1770133006000" data-action_history_1770133006000="INS" data-usertrackingid_history_1770133006000="503"><div class="single 736f667452657475726e2f newline whitespace internal-tag ownttip"><span class="short" title="&lt;13/&gt;: Newline">&lt;13/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div></del><del class="trackchanges ownttip deleted" data-usertrackingid="450" data-usercssnr="usernr2" data-workflowstep="translation1" data-timestamp="2026-02-05T07:11:23+01:00">sporgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="503" data-usercssnr="usernr3" data-workflowstep="translation1" data-timestamp="2026-02-03T16:36:22+01:00">s</del><del class="trackchanges ownttip deleted" data-usertrackingid="503" data-usercssnr="usernr3" data-workflowstep="translation1" data-timestamp="2026-02-03T16:36:21+01:00">porgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="503" data-usercssnr="usernr3" data-workflowstep="translation1" data-timestamp="2026-02-03T16:29:24+01:00" data-historylist="1770117705000" data-action_history_1770117705000="INS" data-usertrackingid_history_1770117705000="450"><div class="single 736f667452657475726e2f newline whitespace internal-tag ownttip"><span class="short" title="&lt;12/&gt;: Newline">&lt;12/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div></del><del class="trackchanges ownttip deleted" data-usertrackingid="503" data-usercssnr="usernr3" data-workflowstep="translation1" data-timestamp="2026-02-03T16:29:24+01:00">sporgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="450" data-usercssnr="usernr2" data-workflowstep="translation1" data-timestamp="2026-02-03T12:21:51+01:00">sporgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="450" data-usercssnr="usernr2" data-workflowstep="translation1" data-timestamp="2026-02-03T12:17:51+01:00">sporgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="450" data-usercssnr="usernr2" data-workflowstep="translation1" data-timestamp="2026-02-03T12:17:00+01:00" data-historylist="1769757288000" data-action_history_1769757288000="INS" data-usertrackingid_history_1769757288000="503"><div class="single 736f667452657475726e2f newline whitespace internal-tag ownttip"><span class="short" title="&lt;9/&gt;: Newline">&lt;9/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div></del><del class="trackchanges ownttip deleted" data-usertrackingid="450" data-usercssnr="usernr2" data-workflowstep="translation1" data-timestamp="2026-02-03T12:16:57+01:00">sporgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="503" data-usercssnr="usernr3" data-workflowstep="translation1" data-timestamp="2026-01-30T08:14:53+01:00">sporgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del><del class="trackchanges ownttip deleted" data-usertrackingid="503" data-usercssnr="usernr3" data-workflowstep="translation1" data-timestamp="2026-01-29T15:22:44+01:00">sporgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra</del>';
        $textNoTC = '2 ante, parete posterioresporgente al centroRipiani in metallo profondit\u00e08 cm per spezieRisp. 1 ripiano internoregolabile sinistra e destra';
        $markupNoTC = '2 ante, parete posteriore<div class="single 736f667452657475726e2f newline whitespace internal-tag ownttip"><span class="short" title="&lt;17/&gt;: Newline">&lt;17/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div>sporgente al centro<div class="single 736f667452657475726e2f newline internal-tag ownttip"><span class="short" title="&lt;3/&gt;: Newline">&lt;3/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div>Ripiani in metallo profondit\u00e0<div class="single 736f667452657475726e2f newline internal-tag ownttip"><span class="short" title="&lt;4/&gt;: Newline">&lt;4/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div>8 cm per spezie<div class="single 736f667452657475726e2f newline internal-tag ownttip"><span class="short" title="&lt;5/&gt;: Newline">&lt;5/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div>Risp. 1 ripiano interno<div class="single 736f667452657475726e2f newline internal-tag ownttip"><span class="short" title="&lt;6/&gt;: Newline">&lt;6/&gt;</span><span class="full" data-originalid="softReturn" data-length="1">\u21b5</span></div>regolabile sinistra e destra';

        $this->createTrackChangesTest($segmentId, $markup, $textNoTC, $markupNoTC);
    }

    private function createReplacedTrackChangesTest(
        int $segmentId,
        string $markup,
        string $expectedTextNoTC,
        string $expectedMarkupNoTC = null
    ): void {
        $this->createTrackChangesTest(
            $segmentId,
            $this->shortToFull($markup),
            $expectedTextNoTC,
            $this->shortToFull($expectedMarkupNoTC)
        );
    }
}
